<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>æ­¦ç”° é³´ / MEI TAKEDA - Tour Dates & Tickets</title>
  <meta name="description" content="Takeda Mei ãƒ©ã‚¤ãƒ–ãƒã‚±ãƒƒãƒˆäºˆç´„ - æœ€æ–°ã®ãƒ„ã‚¢ãƒ¼æƒ…å ±ã¨ãƒã‚±ãƒƒãƒˆäºˆç´„" />
  <meta property="og:image" content="https://takeda-mei.com/img/Twitter_takeda_mei_card.png">
  <meta name="twitter:image" content="https://takeda-mei.com/img/Twitter_takeda_mei_card_2.png" />
    <meta name="description" content="Mei Takeda Web site æ­¦ç”°é³´ãƒã‚±ãƒƒãƒˆäºˆç´„" />
  <meta name="twitter:site" content="@_takeda_mei_">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="æ­¦ç”°é³´ãƒã‚±ãƒƒãƒˆäºˆç´„">
  <style>
    :root {
      --bg: #000000;
      --white: #ffffff;
      --gray: #808080;
      --light-gray: #cccccc;
      --dark-gray: #333333;
      --accent: #ff0080;
      --red: #ff0000;
      --green: #00ff00;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html, body {
      height: 100%;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
      color: var(--white);
      background: var(--bg);
      line-height: 1.4;
      overflow-x: hidden;
    }

    /* APIæ¥ç¶šçŠ¶æ³è¡¨ç¤º */
    .api-status {
      position: fixed;
      top: 10px;
      right: 10px;
      background: var(--dark-gray);
      padding: 8px 12px;
      border: 1px solid var(--gray);
      font-size: 10px;
      color: var(--gray);
      text-transform: uppercase;
      letter-spacing: 1px;
      z-index: 1000;
      display: none;
    }

    .api-status.show {
      display: block;
    }

    .api-status.success {
      border-color: var(--green);
      color: var(--green);
    }

    .api-status.error {
      border-color: var(--red);
      color: var(--red);
    }

    /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
    .header {
      padding: 20px;
      text-align: center;
      border-bottom: 1px solid var(--dark-gray);
      margin-bottom: 40px;
    }

    .artist-name {
      font-size: clamp(24px, 4vw, 48px);
      font-weight: 700;
      letter-spacing: -1px;
      margin-bottom: 8px;
      text-transform: uppercase;
    }

    .tagline {
      font-size: 14px;
      color: var(--gray);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    /* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒŠ */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }

    /* ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒˆ */
    .events-section {
      margin-bottom: 60px;
    }

    .section-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 20px;
      color: var(--white);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .events-grid {
      display: grid;
      gap: 1px;
      background: var(--dark-gray);
      border: 1px solid var(--dark-gray);
    }

    .event-card {
      background: var(--bg);
      padding: 20px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: grid;
      grid-template-columns: auto 1fr auto;
      gap: 20px;
      align-items: center;
      min-height: 80px;
    }

    .event-card:hover {
      background: var(--dark-gray);
    }

    .event-card.selected {
      background: var(--accent);
      color: var(--white);
    }

    .event-date {
      display: flex;
      flex-direction: column;
      align-items: center;
      min-width: 60px;
    }

    .date-month {
      font-size: 12px;
      color: var(--gray);
      text-transform: uppercase;
    }

    .date-day {
      font-size: 24px;
      font-weight: 700;
      line-height: 1;
    }

    .event-card.selected .date-month,
    .event-card.selected .date-day {
      color: var(--white);
    }

    .event-info {
      flex: 1;
    }

    .event-title {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 4px;
      color: var(--white);
    }

    .event-venue {
      font-size: 14px;
      color: var(--gray);
      margin-bottom: 2px;
    }

    .event-time {
      font-size: 12px;
      color: var(--gray);
    }

    .event-card.selected .event-venue,
    .event-card.selected .event-time {
      color: var(--light-gray);
    }

    .event-actions {
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .price-info {
      text-align: right;
    }

    .price-main {
      font-size: 16px;
      font-weight: 600;
      color: var(--white);
    }

    .price-door {
      font-size: 12px;
      color: var(--gray);
    }

    .event-card.selected .price-main,
    .event-card.selected .price-door {
      color: var(--white);
    }

    .btn {
      padding: 8px 16px;
      border: 1px solid var(--white);
      background: transparent;
      color: var(--white);
      text-decoration: none;
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 1px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-block;
    }

    .btn:hover {
      background: var(--white);
      color: var(--bg);
    }

    .btn-primary {
      background: var(--accent);
      border-color: var(--accent);
      color: var(--white);
    }

    .btn-primary:hover {
      background: var(--white);
      color: var(--accent);
      border-color: var(--white);
    }

    /* äºˆç´„ãƒ•ã‚©ãƒ¼ãƒ  */
    .booking-section {
      display: none;
      background: var(--dark-gray);
      padding: 40px;
      margin-top: 20px;
      border: 1px solid var(--gray);
    }

    .booking-section.show {
      display: block;
      animation: slideDown 0.3s ease-out;
    }

    @keyframes slideDown {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .booking-title {
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 20px;
      color: var(--white);
    }

    .selected-event-summary {
      background: var(--bg);
      padding: 20px;
      margin-bottom: 30px;
      border-left: 4px solid var(--accent);
    }

    .summary-title {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 10px;
    }

    .summary-details {
      font-size: 14px;
      color: var(--gray);
      line-height: 1.6;
    }

    .form-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 20px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group.full-width {
      grid-column: 1 / -1;
    }

    label {
      display: block;
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 8px;
      color: var(--white);
    }

    input, select, textarea {
      width: 100%;
      background: var(--bg);
      color: var(--white);
      border: 1px solid var(--gray);
      padding: 12px 16px;
      font-family: inherit;
      font-size: 14px;
      outline: none;
      transition: border-color 0.3s ease;
    }

    input:focus, select:focus, textarea:focus {
      border-color: var(--accent);
    }

    input::placeholder, textarea::placeholder {
      color: var(--gray);
    }

    /* ãƒ•ãƒƒã‚¿ãƒ¼ */
    .footer {
      margin-top: 80px;
      padding: 40px 20px;
      text-align: center;
      border-top: 1px solid var(--dark-gray);
      color: var(--gray);
      font-size: 12px;
    }

    .bandsintown-credit {
      margin-top: 20px;
    }

    .bandsintown-link {
      color: var(--accent);
      text-decoration: none;
    }

    .bandsintown-link:hover {
      text-decoration: underline;
    }

    /* ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ */
    .status {
      margin-top: 20px;
      padding: 15px;
      text-align: center;
      font-size: 14px;
      border: 1px solid var(--gray);
    }

    .status.success {
      background: rgba(0, 255, 0, 0.1);
      border-color: var(--green);
      color: var(--green);
    }

    .status.error {
      background: rgba(255, 0, 0, 0.1);
      border-color: var(--red);
      color: var(--red);
    }

    /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
    @media (max-width: 768px) {
      .event-card {
        grid-template-columns: auto 1fr;
        gap: 15px;
      }
      
      .event-actions {
        grid-column: 1 / -1;
        margin-top: 15px;
        justify-content: flex-start;
      }

      .form-grid {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 480px) {
      .container {
        padding: 0 10px;
      }
      
      .booking-section {
        padding: 20px;
      }
    }
  </style>
</head>
<body>
  <div class="api-status" id="apiStatus">
    <!-- APIæ¥ç¶šçŠ¶æ³ -->
  </div>

  <header class="header">
    <h1 class="artist-name">æ­¦ç”° é³´ ãƒã‚±ãƒƒãƒˆäºˆç´„ãƒ•ã‚©ãƒ¼ãƒ </h1>
    <p class="tagline">è¡ŒããŸã„ãƒ©ã‚¤ãƒ–ã®æ—¥ç¨‹ã‚’é¸ã‚“ã§ãã ã•ã„</p>
  </header>

  <div class="container">
    <!-- ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§ -->
    <section class="events-section">
      <h2 class="section-title">Tour Dates</h2>
      <div class="events-grid" id="eventsGrid">
        <!-- ã‚¤ãƒ™ãƒ³ãƒˆãŒJavaScriptã§å‹•çš„ã«ç”Ÿæˆã•ã‚Œã‚‹ -->
      </div>
    </section>

    <!-- äºˆç´„ãƒ•ã‚©ãƒ¼ãƒ  -->
    <section class="booking-section" id="bookingSection">
      <h3 class="booking-title">Reserve Your Tickets</h3>
      
      <div class="selected-event-summary" id="eventSummary">
        <!-- é¸æŠã•ã‚ŒãŸã‚¤ãƒ™ãƒ³ãƒˆã®è©³ç´° -->
      </div>

      <!-- !! entry IDã‚’æ­£ã—ã„å€¤ã«æ›´æ–°ã—ã¦ãã ã•ã„ !! -->
      <form id="reservationForm" role="form" method="POST"
            action="https://docs.google.com/forms/d/e/1FAIpQLSf7TGrqnpnEOnR_AzyaVAJlAGWun2ZbL9YxXlwWiibZAEuG1Q/formResponse">
        
        <div class="form-grid">
          <div class="form-group">
            <label for="name">åå‰ *</label>
            <!-- entry IDã‚’æ›´æ–°: entry.817030556 -->
            <input type="text" id="name" name="entry.817030556" required placeholder="å±±ç”°å¤ªéƒ" />
          </div>
          
          <div class="form-group">
            <label for="email">Email *</label>
            <!-- entry IDã‚’æ›´æ–°: entry.594301832 -->
            <input type="email" id="email" name="entry.594301832" required placeholder="you@example.com" />
          </div>
        </div>

        <div class="form-grid">
          <div class="form-group">
            <label for="tickets">ãƒã‚±ãƒƒãƒˆæšæ•° *</label>
            <!-- entry IDã‚’æ›´æ–°: entry.845925255 -->
            <select id="tickets" name="entry.845925255" required>
              <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
              <option value="ï¼‘æš">1æš</option>
              <option value="ï¼’æš">2æš</option>
              <option value="ï¼“æš">3æš</option>
              <option value="ï¼”æš">4æš</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="eventTitle">ã‚¤ãƒ™ãƒ³ãƒˆ</label>
            <!-- entry IDã‚’æ›´æ–°: entry.885220633 -->
            <input type="text" id="eventTitle" name="entry.885220633" readonly />
          </div>
        </div>

        <div class="form-group full-width">
          <label for="message">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆä»»æ„ï¼‰</label>
          <!-- entry IDã‚’æ›´æ–°: entry.1558980968 -->
          <textarea id="message" name="entry.1558980968" rows="3" placeholder="ã”è³ªå•ã‚„ã”è¦æœ›ãŒã‚ã‚Œã°ãŠæ›¸ããã ã•ã„"></textarea>
        </div>

        <div class="form-group">
          <label for="verification">Botç¢ºèª: 3 + 4 = ?</label>
          <input type="text" id="verification" name="verification" required placeholder="ç­”ãˆã‚’å…¥åŠ›" style="max-width: 100px;" />
        </div>

        <!-- éš ã—ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰ -->
        <input type="hidden" name="entry.35324790" id="eventDate" />
        <input type="hidden" name="entry.1354862515" id="eventVenue" />

        <div style="display: flex; gap: 10px; margin-top: 30px;">
          <button type="submit" class="btn btn-primary">äºˆç´„ã‚’é€ä¿¡</button>
          <button type="button" class="btn" id="mailBtn">ãƒ¡ãƒ¼ãƒ«ã§é€ä¿¡</button>
        </div>

        <div id="formStatus" class="status" style="display: none;"></div>
      </form>
    </section>
  </div>

  <footer class="footer">
    <p>Â© 2025 Takeda Mei. All rights reserved.</p>
    <div class="bandsintown-credit">
      <a href="https://bandsintown.com/a/15127-takeda-mei" class="bandsintown-link" target="_blank" rel="noopener">
        Powered by Bandsintown - Follow for tour updates
      </a>
    </div>
  </footer>

  <script>
    // Bandsintown APIè¨­å®š
    const BANDSINTOWN_CONFIG = {
      artistName: 'æ­¦ç”° é³´',
      appId: '610e81a3e048378adaaea829de59f64b',
      apiUrl: 'https://rest.bandsintown.com/artists',
      fallbackEvents: [
        {
          id: 'fallback-kyoto-2026-01',
          title: 'Three-Man Live (Saikyoto)',
          date: '2026-01-24',
          venue: 'Kyoto Nano',
          city: 'Kyoto',
          time: { open: '18:30', start: '19:00' },
          price: { advance: 3000, door: 3500 }
        },
        {
          id: 'fallback-tokyo-2026-02',
          title: 'Noise Night Vol.12',
          date: '2026-02-15',
          venue: 'Shibuya WWW',
          city: 'Tokyo',
          time: { open: '19:00', start: '19:30' },
          price: { advance: 2500, door: 3000 }
        }
      ]
    };

    let EVENTS = [];
    let selectedEvent = null;

    // DOMè¦ç´ ã®å–å¾—
    const $ = (selector) => document.querySelector(selector);

    // APIæ¥ç¶šçŠ¶æ³è¡¨ç¤º
    function showApiStatus(message, type = 'info') {
      const status = $('#apiStatus');
      if (status) {
        status.textContent = message;
        status.className = `api-status show ${type}`;
        setTimeout(() => {
          status.classList.remove('show');
        }, 3000);
      }
    }

    // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
    function showLoading() {
      const eventsGrid = $('#eventsGrid');
      if (eventsGrid) {
        eventsGrid.innerHTML = `
          <div style="text-align: center; padding: 40px; color: var(--gray);">
            <div style="margin-bottom: 20px;">ğŸµ</div>
            <div>Loading events from Bandsintown...</div>
          </div>
        `;
      }
      showApiStatus('Connecting to Bandsintown API...', 'info');
    }

    // ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
    function showError() {
      const eventsGrid = $('#eventsGrid');
      if (eventsGrid) {
        eventsGrid.innerHTML = `
          <div style="text-align: center; padding: 40px; color: var(--red);">
            <div>âš ï¸ Unable to connect to Bandsintown</div>
            <div style="font-size: 12px; margin-top: 10px; color: var(--gray);">
              Artist not found or API connection failed.<br>
              Using sample event data for demonstration.
            </div>
          </div>
        `;
      }
    }

    // æ—¥ä»˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆé–¢æ•°
    function formatDate(dateStr) {
      const date = new Date(dateStr);
      const month = date.toLocaleDateString('ja-JP', { month: 'short' }).replace('æœˆ', 'æœˆ');
      const day = date.getDate();
      return { month, day };
    }

    // ã‚¤ãƒ™ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰ç”Ÿæˆ
    function createEventCard(event) {
      const { month, day } = formatDate(event.date);
      
      return `
        <div class="event-card" data-event-id="${event.id}">
          <div class="event-date">
            <div class="date-month">${month}</div>
            <div class="date-day">${day}</div>
          </div>
          <div class="event-info">
            <div class="event-title">${event.title}</div>
            <div class="event-venue">${event.venue}, ${event.city}</div>
            <div class="event-time">Open ${event.time.open} / Start ${event.time.start}</div>
          </div>
          <div class="event-actions">
            <div class="price-info">
              <div class="price-main">Â¥${event.price.advance.toLocaleString()}</div>
              <div class="price-door">Door Â¥${event.price.door.toLocaleString()}</div>
            </div>
          </div>
        </div>
      `;
    }

    // Bandsintown APIã‹ã‚‰ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±ã‚’å–å¾—
    async function fetchBandsintownEvents() {
      try {
        const encodedArtist = encodeURIComponent(BANDSINTOWN_CONFIG.artistName);
        const url = `${BANDSINTOWN_CONFIG.apiUrl}/${encodedArtist}/events?app_id=${BANDSINTOWN_CONFIG.appId}`;
        
        console.log('Fetching events from Bandsintown API...', url);
        showApiStatus('Fetching events...', 'info');
        
        const response = await fetch(url);
        
        if (!response.ok) {
          if (response.status === 404) {
            throw new Error(`Artist "${BANDSINTOWN_CONFIG.artistName}" not found on Bandsintown.`);
          }
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        const bandsintownEvents = await response.json();
        console.log('Bandsintown API response:', bandsintownEvents);
        showApiStatus('Connected to Bandsintown', 'success');
        
        if (!Array.isArray(bandsintownEvents) || bandsintownEvents.length === 0) {
          console.log('No events found on Bandsintown, using fallback data');
          showApiStatus('No events on Bandsintown', 'error');
          return BANDSINTOWN_CONFIG.fallbackEvents;
        }
        
        console.log('Found', bandsintownEvents.length, 'events on Bandsintown');
        showApiStatus(`Found ${bandsintownEvents.length} events`, 'success');
        
        const convertedEvents = bandsintownEvents.map((event, index) => {
          return convertBandsintownEvent(event, index);
        }).filter(event => event !== null);
        
        console.log('Successfully converted', convertedEvents.length, 'events');
        return convertedEvents;
        
      } catch (error) {
        console.warn('Bandsintown API error:', error.message);
        showApiStatus('Using offline data', 'error');
        return BANDSINTOWN_CONFIG.fallbackEvents;
      }
    }

    // Bandsintownã®ã‚¤ãƒ™ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã«å¤‰æ›
    function convertBandsintownEvent(btEvent, index = 0) {
      try {
        const eventDate = new Date(btEvent.starts_at || btEvent.datetime);
        if (isNaN(eventDate.getTime())) {
          console.error('Invalid date:', btEvent.starts_at || btEvent.datetime);
          return null;
        }
        
        const dateStr = eventDate.toISOString().split('T')[0];
        const startTime = eventDate.toTimeString().slice(0, 5);
        
        const openDate = new Date(eventDate.getTime() - 30 * 60 * 1000);
        const openTime = openDate.toTimeString().slice(0, 5);
        
        const converted = {
          id: btEvent.id || `bt-event-${index}`,
          title: btEvent.title || btEvent.description || 'Live Performance',
          date: dateStr,
          venue: btEvent.venue ? btEvent.venue.name : 'TBD',
          city: btEvent.venue ? btEvent.venue.city : 'TBD',
          time: {
            open: openTime,
            start: startTime
          },
          price: {
            advance: 3000,
            door: 3500
          }
        };
        
        return converted;
        
      } catch (error) {
        console.error('Error converting Bandsintown event:', error, btEvent);
        return null;
      }
    }

    // ã‚¤ãƒ™ãƒ³ãƒˆé¸æŠå‡¦ç†
    function selectEvent(eventId) {
      console.log('Selecting event:', eventId);
      
      // å…¨ã¦ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰ã‹ã‚‰é¸æŠçŠ¶æ…‹ã‚’å‰Šé™¤
      const allEventCards = document.querySelectorAll('.event-card');
      for (let i = 0; i < allEventCards.length; i++) {
        allEventCards[i].classList.remove('selected');
      }
      
      // æŒ‡å®šã•ã‚ŒãŸã‚¤ãƒ™ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰ã‚’é¸æŠçŠ¶æ…‹ã«ã™ã‚‹
      const selectedCard = document.querySelector(`.event-card[data-event-id="${eventId}"]`);
      if (selectedCard) {
        selectedCard.classList.add('selected');
        console.log('Event card selected successfully');
      }

      selectedEvent = EVENTS.find(event => event.id === eventId);
      if (selectedEvent) {
        updateBookingSection(selectedEvent);
        const bookingSection = $('#bookingSection');
        if (bookingSection) {
          bookingSection.classList.add('show');
          
          setTimeout(() => {
            bookingSection.scrollIntoView({ 
              behavior: 'smooth', 
              block: 'start' 
            });
          }, 100);
        }
      }
    }

    // äºˆç´„ã‚»ã‚¯ã‚·ãƒ§ãƒ³æ›´æ–°
    function updateBookingSection(event) {
      const { month, day } = formatDate(event.date);
      
      const eventSummary = $('#eventSummary');
      if (eventSummary) {
        eventSummary.innerHTML = `
          <div class="summary-title">${event.title}</div>
          <div class="summary-details">
            ${month} ${day} at ${event.venue}, ${event.city}<br>
            Open ${event.time.open} / Start ${event.time.start}<br>
            Advance Â¥${event.price.advance.toLocaleString()} / Door Â¥${event.price.door.toLocaleString()}
          </div>
        `;
      }
      
      const eventTitleField = $('#eventTitle');
      const eventDateField = $('#eventDate');
      const eventVenueField = $('#eventVenue');
      
      if (eventTitleField) eventTitleField.value = event.title;
      if (eventDateField) eventDateField.value = event.date;
      if (eventVenueField) eventVenueField.value = `${event.venue}, ${event.city}`;
    }

    // ãƒ•ã‚©ãƒ¼ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³é–¢æ•°
    function validateForm() {
      console.log('=== ãƒ•ã‚©ãƒ¼ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹ ===');
      
      const nameField = $('#name');
      const emailField = $('#email');
      const ticketsField = $('#tickets');
      const verificationField = $('#verification');
      
      // ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å­˜åœ¨ç¢ºèª
      if (!nameField || !emailField || !ticketsField || !verificationField) {
        console.error('å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
        return false;
      }
      
      // å€¤ã®å–å¾—ã¨ç¢ºèª
      const name = nameField.value.trim();
      const email = emailField.value.trim();
      const tickets = ticketsField.value;
      const verification = verificationField.value.trim();
      
      console.log('ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å€¤:', { name, email, tickets, verification });
      
      // å¿…é ˆé …ç›®ãƒã‚§ãƒƒã‚¯
      if (!name) {
        showStatus('åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');
        nameField.focus();
        return false;
      }
      
      if (!email) {
        showStatus('ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');
        emailField.focus();
        return false;
      }
      
      if (!tickets) {
        showStatus('ãƒã‚±ãƒƒãƒˆæšæ•°ã‚’é¸æŠã—ã¦ãã ã•ã„', 'error');
        ticketsField.focus();
        return false;
      }
      
      // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å½¢å¼ãƒã‚§ãƒƒã‚¯
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        showStatus('æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');
        emailField.focus();
        return false;
      }
      
      // ç¢ºèªå•é¡Œãƒã‚§ãƒƒã‚¯
      if (verification !== '7') {
        showStatus('ç¢ºèªå•é¡Œã®ç­”ãˆãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ (3 + 4 = 7)', 'error');
        verificationField.focus();
        return false;
      }
      
      console.log('ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æˆåŠŸ');
      return true;
    }

    // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡å‡¦ç†ï¼ˆä¿®æ­£ç‰ˆï¼‰
    function handleFormSubmit(e) {
      e.preventDefault(); // ã¾ãšé€ä¿¡ã‚’åœæ­¢
      console.log('=== ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡é–‹å§‹ ===');
      
      // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
      if (!validateForm()) {
        console.log('ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å¤±æ•—');
        return;
      }
      
      console.log('ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æˆåŠŸ - é€ä¿¡ã‚’å®Ÿè¡Œ');
      showStatus('é€ä¿¡ä¸­...', 'success');
      
      // ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
      const form = e.target;
      const formData = new FormData(form);
      
      // Googleãƒ•ã‚©ãƒ¼ãƒ ã«ç›´æ¥POSTé€ä¿¡ï¼ˆfetchä½¿ç”¨ï¼‰
      fetch(form.action, {
        method: 'POST',
        body: formData,
        mode: 'no-cors' // CORSåˆ¶é™ã‚’å›é¿
      }).then(() => {
        console.log('Googleãƒ•ã‚©ãƒ¼ãƒ ã¸ã®é€ä¿¡å®Œäº†');
      }).catch((error) => {
        console.log('é€ä¿¡å‡¦ç†:', error);
        // no-corsãƒ¢ãƒ¼ãƒ‰ã§ã¯ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ã“ã¨ãŒã‚ã‚‹ãŒã€å®Ÿéš›ã«ã¯é€ä¿¡ã•ã‚Œã¦ã„ã‚‹
      });
      
      // é€ä¿¡å®Œäº†å¾Œã€æˆåŠŸãƒšãƒ¼ã‚¸ã¸é·ç§»
      setTimeout(() => {
        console.log('æˆåŠŸãƒšãƒ¼ã‚¸ã¸é·ç§»é–‹å§‹');
        
        if (selectedEvent) {
          const eventParams = new URLSearchParams({
            event: selectedEvent.title,
            date: selectedEvent.date,
            venue: selectedEvent.venue,
            city: selectedEvent.city
          });
          
          window.location.href = `success.html?${eventParams.toString()}`;
        } else {
          window.location.href = 'success.html';
        }
      }, 1500);
      
      console.log('ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡å®Ÿè¡Œå®Œäº†');
    }

    // ãƒ¡ãƒ¼ãƒ«é€ä¿¡å‡¦ç†
    function handleMailSubmit() {
      console.log('=== ãƒ¡ãƒ¼ãƒ«é€ä¿¡é–‹å§‹ ===');
      
      if (!selectedEvent) {
        showStatus('ã‚¤ãƒ™ãƒ³ãƒˆã‚’é¸æŠã—ã¦ãã ã•ã„', 'error');
        return;
      }
      
      if (!validateForm()) {
        console.log('ãƒ¡ãƒ¼ãƒ«é€ä¿¡ - ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å¤±æ•—');
        return;
      }
      
      const form = $('#reservationForm');
      const formData = new FormData(form);
      const data = Object.fromEntries(formData.entries());
      
      const subject = `[ãƒã‚±ãƒƒãƒˆäºˆç´„] ${selectedEvent.title}`;
      const body = `
ã‚¤ãƒ™ãƒ³ãƒˆ: ${selectedEvent.title}
æ—¥ç¨‹: ${selectedEvent.date}
ä¼šå ´: ${selectedEvent.venue}, ${selectedEvent.city}
æšæ•°: ${data.tickets || 'æœªé¸æŠ'}æš

æ°å: ${data.name || ''}
ãƒ¡ãƒ¼ãƒ«: ${data.email || ''}
ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: ${data.message || ''}
      `.trim();
      
      const mailtoUrl = `mailto:info@takeda-mei.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
      window.location.href = mailtoUrl;
      console.log('ãƒ¡ãƒ¼ãƒ«ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆèµ·å‹•');
    }

    // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º
    function showStatus(message, type = 'success') {
      console.log(`ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º: ${message} (${type})`);
      const status = $('#formStatus');
      if (status) {
        status.textContent = message;
        status.className = `status ${type}`;
        status.style.display = 'block';
        
        setTimeout(() => {
          status.style.display = 'none';
        }, 5000);
      }
    }

    // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š
    function setupEventListeners() {
      console.log('=== ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®šé–‹å§‹ ===');
      
      // ã‚¤ãƒ™ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰ã®ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆforæ–‡ã‚’ä½¿ç”¨ï¼‰
      const eventCards = document.querySelectorAll('.event-card');
      console.log(`è¦‹ã¤ã‹ã£ãŸã‚¤ãƒ™ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰æ•°: ${eventCards.length}`);
      
      if (eventCards.length > 0) {
        for (let i = 0; i < eventCards.length; i++) {
          const card = eventCards[i];
          const eventId = card.dataset.eventId;
          
          console.log(`ã‚¤ãƒ™ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰${i + 1}ã«ãƒªã‚¹ãƒŠãƒ¼è¨­å®š: ${eventId}`);
          
          card.addEventListener('click', function() {
            console.log(`ã‚¤ãƒ™ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰${i + 1}ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ: ${eventId}`);
            selectEvent(eventId);
          });
        }
        console.log(`${eventCards.length}å€‹ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰ã«ãƒªã‚¹ãƒŠãƒ¼è¨­å®šå®Œäº†`);
      } else {
        console.error('ã‚¤ãƒ™ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
        // å†è©¦è¡Œ
        setTimeout(() => {
          console.log('ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®šã‚’å†è©¦è¡Œ...');
          setupEventListeners();
        }, 500);
        return;
      }
      
      // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ã‚¤ãƒ™ãƒ³ãƒˆ
      const form = $('#reservationForm');
      if (form) {
        form.addEventListener('submit', handleFormSubmit);
        console.log('ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ãƒªã‚¹ãƒŠãƒ¼è¨­å®šå®Œäº†');
      } else {
        console.error('ãƒ•ã‚©ãƒ¼ãƒ è¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
      }
      
      // ãƒ¡ãƒ¼ãƒ«é€ä¿¡ãƒœã‚¿ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆ
      const mailBtn = $('#mailBtn');
      if (mailBtn) {
        mailBtn.addEventListener('click', handleMailSubmit);
        console.log('ãƒ¡ãƒ¼ãƒ«é€ä¿¡ãƒœã‚¿ãƒ³ãƒªã‚¹ãƒŠãƒ¼è¨­å®šå®Œäº†');
      } else {
        console.error('ãƒ¡ãƒ¼ãƒ«é€ä¿¡ãƒœã‚¿ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
      }
    }

    // åˆæœŸåŒ–
    async function init() {
      console.log('=== ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åˆæœŸåŒ–é–‹å§‹ ===');
      showLoading();
      
      try {
        console.log('Bandsintown API fetché–‹å§‹...');
        const events = await fetchBandsintownEvents();
        
        EVENTS = events.filter(event => event !== null);
        console.log('æœ€çµ‚EVENTSé…åˆ—:', EVENTS);

        if (EVENTS.length === 0) {
          const eventsGrid = $('#eventsGrid');
          eventsGrid.innerHTML = `
            <div style="text-align: center; padding: 40px; color: var(--gray);">
              <div>ğŸ“… No upcoming events</div>
              <div style="font-size: 12px; margin-top: 10px;">
                Check back soon for new tour dates!
              </div>
            </div>
          `;
          return;
        }

        // ã‚¤ãƒ™ãƒ³ãƒˆã‚’æ—¥ä»˜é †ã«ã‚½ãƒ¼ãƒˆ
        EVENTS.sort((a, b) => new Date(a.date) - new Date(b.date));
        
        // ã‚¤ãƒ™ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰ç”Ÿæˆ
        const eventsGrid = $('#eventsGrid');
        if (eventsGrid) {
          eventsGrid.innerHTML = EVENTS.map(createEventCard).join('');
          console.log('ã‚¤ãƒ™ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰ç”Ÿæˆå®Œäº†');
          
          // DOMæ›´æ–°ã‚’å¾…ã£ã¦ã‹ã‚‰ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š
          setTimeout(() => {
            setupEventListeners();
          }, 100);
        }

        console.log(`${EVENTS.length}å€‹ã®ã‚¤ãƒ™ãƒ³ãƒˆã®èª­ã¿è¾¼ã¿å®Œäº†`);
        
      } catch (error) {
        console.error('åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:', error);
        
        // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†
        console.log('ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨');
        EVENTS = [...BANDSINTOWN_CONFIG.fallbackEvents];
        
        if (EVENTS.length > 0) {
          setTimeout(() => {
            const eventsGrid = $('#eventsGrid');
            if (eventsGrid) {
              eventsGrid.innerHTML = EVENTS.map(createEventCard).join('');
              
              setTimeout(() => {
                setupEventListeners();
              }, 100);
            }
          }, 1000);
        }
      }
    }

    // DOMãŒèª­ã¿è¾¼ã¾ã‚ŒãŸã‚‰åˆæœŸåŒ–å®Ÿè¡Œ
    document.addEventListener('DOMContentLoaded', function() {
      console.log('DOMèª­ã¿è¾¼ã¿å®Œäº† - åˆæœŸåŒ–é–‹å§‹');
      init();
    });

  <!-- ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã¨iframeã‚’å‰Šé™¤ -->

  </script>

</body>
</html>